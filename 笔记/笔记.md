# Vue.js 

### 一、Vue.js 简介

​	Vue.js (读音 /vjuː/，类似于 **view**) 是一套构建用户界面的**渐进式框架**。与其他重量级框架不同的是，Vue 采用自底向上增量开发的设计。Vue 的核心库只关注视图层，它不仅易于上手，还便于与第三方库或既有项目整合。

​	MVVM  只关心视图和数据的交互操作

+ 作者：尤雨溪



### 二、起步

#### 1、下载vue.js 的支持库

`npm install vue`  下载核心库    vue.js    vue.min.js

#### 2、Hello world

+ JS+JSON 实现 所有功能
+ Vue中存在版本差异
  + vue 1.x   ： 可以对页面中的 body 标签进行 容器指定
  + vue 2.x   ：  不允许指定 body 标签为 容器，只能是 body 中的其它标签

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../js/vue.js"></script>
    <!-- 
        阻止了 浏览对vue 的调试
        vue  的调试信息显示
     -->
    <!-- <script src="../js/vue.min.js"></script> -->
    <title>Vue hello world</title>
</head>
<body>
    <!--
        1、在页面中提供一个容器 ，用于为当前框架展示数据
        2、通过js 代码实现 vue 初始化 ，完成容器和vue之间的关联
    -->
    <div id="app">
        <!-- 插值表达式 -->
        {{hello}}
    </div>

    <script>
        // 全局配置项的配置
        Vue.config.devtools = false;
        Vue.config.productionTip = false;
        Vue.config.silent = true;    

        // 实例化 new（初始化） vue 对象
        // new Vue(opt:Object);
        new Vue({
            // 通过css的基础选择器语法 完成 元素和Vue对象的关联
            el:"#app",
            // 用于存储和页面间的通信数据
            data:{
                hello:"hello Vue 2333"
            }
        });
    </script>
</body>
</html>
```

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>实例挂载</title>
    <script src="../js/vue.js"></script>
    <script>
        window.onload = function(){
            // 返回值  new Vue创建的对象
            var vm = new Vue({
                data:{
                    msg:"挂载显示消息"
                }
            });

            // vm ==> viewMode  ==>  对于mvvm框架创建的对象，一般使用vm进行表示
            // 挂载 元素对象  （容器）
            vm.$mount("#app");

            new Vue({
                data:{
                    name:"itany"
                },
                template:"<h1>这是模版</h1>"
            }).$mount("#itany")

        };
    
    </script>
</head>
<body>
    <div id="app">
        {{msg}}
    </div>
    <div id="itany">
        {{name}}
    </div>
</body>
</html>
```



#### 3、全局配置项

+ 对整个Vue 的运行环境进行配置
  + silent    取消所有的信息和日志警告
  + optionMergeStrategies  自定义合并策略的选项。
  + devtools    设置开发工具是否可用
  + errorHandler    定义vue 页面出现错误时的 处理函数
  + warnHandler    定义vue 页面出现警告时的 处理函数
  + ignoredElements  须使 Vue 忽略在 Vue 之外的自定义元素 
  + keyCodes    设置键盘映射表 ==>  后续课程进行讲解
  + performance   对浏览器的开发工具进行性能检测的
  + productionTip   生产环境的提示消息



#### 4、生命周期

+ 创建到消亡的过程
  + Vue 对象的 创建到消亡的过程

![生命周期](./img/生命周期.png)

### 三、模版语法

#### 1、插值

+ 语法 `{{}}`

 #### 1.1普通文本的插入

```html
<div>{{msg}}</div>
```

#### 1.2 HTML 标签的插入

+ 直接使用  {{}}  进行带有标签的字符串写入时，类似于  JQUERY  text()
+ 插值表达式 不可以写入 html标签   （不能解析HTML标签）  ==>  指令
+ 指令后 可以直接写 简单的 JS 表达式

#### 1.3 js 脚本

+ 可以执行  简单的  js 表达式

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../js/vue.js"></script>
    <script>
        window.onload = ()=>{
            new Vue({
                el:"#app",
                data:{
                    msg:"文本消息",
                    html:"<h4>标签文本</h4>"
                }
            });
        }
    </script>
    <title>插值表达式</title>
</head>
<body>
    <div id="app">
        <h4>{{msg}}</h4>
        <div>
            {{html}}
        </div>
        <h4>js 表达式</h4>
        <div>{{ 1+1 }}</div>
        <div>{{ 10/3 }}</div>
        <div>{{ 10%3 }}</div>
        <div>{{ 1==1 ? "true":"false" }}</div>
        <!-- ++ …… 不能执行 -->
        <!-- <div>{{ ++num }}</div> -->
    </div>
</body>
</html>
```



#### 2、指令

+ Vue中所指的指令是  以 `v-` 开头的元素属性  ,这些特殊的属性称之为 Vue的指令
+ 指令参数   在相关指令后  以   :   的方式对该指令进行参数传递， v-on:click
+ 指令修饰符 修饰符定义在 指令的后面 . 方式表示，用于做限制和判断

##### 2.1 v-text 

+ 功能和 {{}}  一样 做文本写入操作
+ 依赖于一个标签，值是写在 标签中的

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../js/vue.js"></script>
    <script>
        window.onload = ()=>{

            new Vue({
                el:"#app",
                data:{
                    msg:"文本消息"
                }
            });
        }
    </script>
    <title>指令</title>
</head>
<body>
    <div id="app">
        <h4>{{msg}}</h4>
        <h4 v-text="msg"></h4>
    </div>
</body>
</html>
```



##### 2.2 v-html

+ 将输入html 字符串以解析的方式写入到页面

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../js/vue.js"></script>
    <script>
        window.onload = ()=>{
            new Vue({
                el:"#app",
                data:{
                    html:"<h4>标签文本</h4>",
                }
            });
        }
    </script>
    <title>指令</title>
</head>
<body>
    <div id="app">
        <div>{{html}}</div>
        <div v-html="html"></div>
    </div>
</body>
</html>
```



##### 2.3 v-on 

+ 事件绑定
+ v-on 使用需要去配合参数进行使用，参数就是元素的事件，就是原始的HTML的事件名
+ v-on 监听HTML 的原始DOM事件，指定的方法定义方式和原生的方法定义方式一样
+ 绑定的事件一定要是在创建的Vue对象中所指定的事件，事件方法是定义在 methods 中
+ 提供 简写方式   `v-on:事件`   ==>  `@事件`

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../js/vue.js"></script>
    <script>
        window.onload = ()=>{
            new Vue({
                el:"#app",
                data:{
                    msg:"文本消息",
                }
                methods:{
                    show:function(){
                        this.msg = "aaaa";
                    }
                }
            });
        }
    </script>
    <title>指令</title>
</head>
<body>
    <div id="app">
        <h4>{{msg}}</h4>
      
        <input type="button" value="按钮" v-on:click="show()">
    </div>
</body>
</html>
```

+ 增减修饰符
  + 定义键盘拦截
  + 阻止冒泡 、默认事件


```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
        .div1{
            width: 300px;
            height: 300px;
            border: 1px solid black;
        }
        .div2{
            width: 200px;
            height: 200px;
            border: 1px solid black;
        }
        .div3{
            width: 100px;
            height: 100px;
            border: 1px solid black;
        }
    
    </style>
    <script src="../js/vue.js"></script>
    <title>Document</title>
    <!-- 
        1、阻止默认行为
        2、阻止冒泡

        .stop - 调用 event.stopPropagation()。
        .prevent - 调用 event.preventDefault()。  阻止默认事件
        .self - 只当事件是从侦听器绑定的元素本身触发时才触发回调。
    -->
    <script>
        window.onload = function(){
            new Vue({
                el:"#app",
                methods:{
                    fun1(){
                        console.log("被点了");
                    },
                    fun2(){
                        console.log("fun2");
                    },
                    fun3(){
                        console.log("fun3");
                    },
                    fun4(){
                        console.log("fun4");
                    },
                    fun5(){
                        console.log("fun5");
                    }
                }
            });
        }
    
    </script>
</head>
<body>
    <!-- a 标签的 点击事件 默认行为 就是 跳转页面 -->
    <a href="http://www.baidu.com">百度</a>
    <div id="app">
        <a href="http://www.baidu.com" v-on:click.prevent >百度</a>
        <a href="http://www.baidu.com" v-on:click.prevent="fun1()" >百度</a>
        <hr>
        <!-- 事件冒泡 -->
        <div class="div1" v-on:click.self="fun5()">
            <div class="div2" v-on:click="fun4()">
                <div class="div3" v-on:click="fun3()">
                    <span v-on:click.stop="fun2()">测试</span>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
```




##### 2.4 v-bind

+ 元素属性绑定，class  style 普通属性该如何处理
  + 普通属性
  + class
  + style
+ `v-bind`  的简写方式   `:属性`

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
        .aa{
            width: 100px;
            height: 100px;
            background-color: rebeccapurple;
        }
        .bb{
            color: white;
        }
        .cc{
            color: blue;
        }
        .fs{
            font-size: 20px;
        }
    </style>
    <script src="../js/vue.js"></script>
    <title>v-bind 的使用</title>
    <script>
        window.onload = function(){
            new Vue({
                el:"#app",
                data:{
                    w:"100px",
                    h:"100px",
                    imgurl:"../img/生命周期.png",
                    statu:true,
                    // aa:"aa bb",
                    divStyle:"aa",
                    colorStyle:"bb",
                    flag:true,
                    clazz:{aa:true,bb:true,cc:false},
                    style1:{color:'red'},
                    style2:{fontSize:'30px'}
                },
                methods:{
                    change(){
                        this.w = "200px";
                        this.h = "200px";
                        this.imgurl = "http://www.baidu.com/img/bd_logo1.png";
                    },
                    changeColor(){
                        // this.colorStyle = "cc";
                        this.colorStyle = this.colorStyle == "bb"? "cc":"bb";
                    },
                    changeFlag(){
                        this.flag = !this.flag;
                    }
                }
            });
        }
    
    </script>
</head>
<body>
    <div id="app">
        <h1>普通属性的绑定</h1>
        <!-- 
            指令后面的  “”  中指定是 vue 实例中 data 中的变量名
         -->
        <button type="button" @click="change()">改变大小</button>
        <img v-bind:src="imgurl" v-bind:width="w" v-bind:height="h">
        <hr>
        <!--
            Vue 中对于互斥属性 一般可以直接使用  boolean 进行状态的选择
            Vue 对于 复选单选，下拉列表，存在一种特殊的 选中方式？
            ……
        -->
        <input type="checkbox" :checked="statu">
        <hr>
        <!-- class的绑定 -->
        <!-- <div class="aa bb"></div> -->
        <!-- 1、变量的定义方式 -->
        <!-- <div :class="aa"> -->
        
        <!-- 2、数组的定义方式 -->
        <div :class="[divStyle,colorStyle]">
            div1
        </div>
        <input type="button" value="变变变" @click="changeColor()">

        <!-- 
            3、JSON 定义方式     (常用)
                key 使用 样式名
                value  boolean
            可以处理互斥样式
                success error
        -->
        <div :class="{aa:true,bb:false,cc:true}">
            div2
        </div>
        <div class="fs" :class="{aa:true,bb:flag,cc:!flag}" @click="changeFlag()">
            div3
        </div>
        <!-- 
            4、变量json 的方式进行定义
         -->
         <div :class="clazz">
             div4
         </div>
        <!-- 对于 style 的绑定 -->
        <div style="color:red; font-size:30px" >div5</div>
        <!--
            key 样式名称   ==> 遵循 原生 JS 的Style操作方式   xxx-yyy-zzz ==> xxxYyyZzz
            value 是样式的值
        -->
        <div :style="{color:'red',fontSize:'30px'}">
            div6
        </div>
        <!-- 
            可以取数组对象
         -->
         <div :style="[{color:'red'},{fontSize:'30px'}]">
             div7
         </div>
         <div :style="[style1,style2]">
            div8
        </div>
    </div>
</body>
</html>
```



##### 2.5 v-model

+ 双向数据绑定，经常用在表单属性中
+ .lazy 修饰符  用于定义input 框的  光标移开事件
+ v-model 双向数据绑定对于表单元素的影响

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../js/vue.js"></script>
    <script>
        window.onload = ()=>{
            new Vue({
                el:"#app",
                data:{
                    str:"aaa"
                }
            });
        }
    </script>
    <title>指令</title>
</head>
<body>
    <div id="app">
        <input type="text" v-model="str">
        <input type="text" v-model="str">
        <h4>{{str}}</h4>
    </div>
</body>
</html>
```



##### 2.6 v-pre

+ 完整显示 == 让当前标签中的 {{}} 不去做解析，作为文本在页面中显示



##### 2.7 v-cloak

+ 解决页面闪烁问题
+ 该属性单独使用无效，需要配合自定义CSS样式
+ 需要定义  css 样式  ` [v-cloak]{display: none; }`



##### 2.8 v-once

+ 只绑定一次，在Vue对象创建时 指定该属性的元素只会渲染一次，后需要Vue数据发生变化不会再影响到该标签



##### 2.9 v-if

+ 判断，根据boolean类型判断，用于决定绑定了v-if的元素是否显示
+ 根据结果 选择 创建元素还是不创建元素



##### 2.10 v-show

+ 判断，根据boolean类型判断，用于决定绑定了v-show的元素是否显示
+ 会直接创建DOM 元素，但根据 display: none; 方式进行元素的隐藏



##### 2.11 v-else 和 v-else-if

+ v-else 和 v-else-if 不可以单独使用 ，必须配合 v-if 使用



##### 2.12 v-for

+ 对绑定 v-for 的元素做循环操作




### 四、自定义指令 

+ 全局自定义：在所有的Vue 实例中都可以使用



+ 局部自定义：在指定的Vue 实例中才可以使用





### 五、自定义过滤器

+ Vue 1.x 版本中  集成了大量的内置过滤器，字符串转换、时间转换……
+ Vue 2.x 删除了所有内置过滤器 ==> 自定义内置过滤器 \==> 使用三方过滤器

- 全局自定义：在所有的Vue 实例中都可以使用
- 局部自定义：在指定的Vue 实例中才可以使用




### 六、计算属性

+ 使用缓存的方式处理过滤器的功能


+ 结果过程 类似于过滤器
+ 过滤器每次调用都会执行一次运算过程，计算的结果不会缓存
+ 计算属性在其依赖属性未发生变换时，运算过程只会执行一次，计算的记过会被缓存，直到依赖属性发生变换才会再次计算
+ 计算属性 默认 只提供 单向数据绑定操作  ==> 只能取值 不能赋值

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../js/vue.js"></script>
    <title>计算属性</title>
</head>
<body>
    <div id="app">
        <input type="text" v-model="num">
        <hr>
        <h1>{{num}} > 10 : {{ num | number}}</h1>
        <h1>{{num}} > 10 : {{ num | number}}</h1>
        <h1>{{num}} > 10 : {{ num | number}}</h1>
        <h1>{{num}} > 10 : {{ num | number}}</h1>
        <hr>
        <h1>{{num}} > 10 : {{ result }}</h1>
        <h1>{{num}} > 10 : {{ result }}</h1>
        <h1>{{num}} > 10 : {{ result }}</h1>
        <h1>{{num}} > 10 : {{ result }}</h1>
        <hr>
        <input type="text" v-model="result">
        <hr>
        <input type="text" v-model="num2">
        <input type="text" v-model="addNum">
        <input type="text" v-model="num3" @change="setNum2()">
        <h1>{{num2}}:{{addNum}}</h1>
        
    </div>
    <script>
        Vue.filter("number",function(data){
            console.log("过滤器:",Math.random());
            return data>10
        });

        new Vue({
            el:"#app",
            // 普通属性值
            data:{
                num:6,
                num2:1,
                num3:0
            },
            // 计算属性值
            computed:{
                // name:Function
                // 1、计算属性所对应的function 不能使用 => 函数 
                //     使用=> 函数 不能保证 计算属性函数中的this是当前的 Vue 实例
                // 2、计算属性的函数一定要有返回值
                result:function(){  //get 方法
                    // 增加一些其他的判断获取逻辑流程
                    console.log("计算属性：",Math.random());
                    return this.num > 10;
                },
                // getter  缺少  setter
                //  get set 方法  用于表示对一个参数的取值和赋值的两种操作
                // addNum:function(){
                //     return parseInt(this.num2)*2;
                // }
                addNum:{
                    get:function(){
                        return parseInt(this.num2)*2;
                    },
                    // set 必须和 依赖属性进行关联
                    // set 和自己进行关联 会造成死循环
                    set:function(value){
                        // console.log(value);
                        // this.addNum = parseInt(value)/2;
                        this.num2 = parseInt(value)/2;
                    }
                }
            },
            methods:{
                setNum2(){
                   this.num2 = this.num3/2;
                }
            }
        });
    </script>
</body>
</html>
```



### 七、过渡效果

+ 提供简单的方式实现CSS动画效果
+ 会和Vue实例中的数据做关联

#### 1、基础应用

+ 生命周期
  + 开始  过渡  结束
  + 开始前 开始  开始后  过渡前 过渡 过渡后 结束前 结束 结束后
  + 对于DOM元素需要添加动画 ，将该元素放置在  `<transition  >DOM</transition>`
+ transition  只用于定义单元素动画
+ transition-group  定义多元素动画  一定要在子元素上 绑定一个 key 属性
  + key 用于区分动画的加载元素




### 八、Vue 对象的实例方法

+ 堆栈空间的数据存储
+ 对于vue 而言，所有的实例属性都具有两种表现形式（watch除外）
  + vm.$名称   对象调用
  + Vue.名称    全局调用
+ vm.$set 或者 Vue.set   : 为新增减的属性完成  getter 和 setter 方法的定义，并完成赋值

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../js/vue.js"></script>
    <title>实例属性</title>
</head>
<body>
    <div id="app">
        <input type="text" v-model="msg">
        <span>基本类型：{{msg}}</span>
        <input type="button" value="设置消息" @click="setMsg()">
        <input type="button" value="设置新消息" @click="setNewMsg()">
        <br>
        <input type="text" v-model="user.name">
        <span>引用类型：{{user}}</span>
        <span></span>
        <input type="button" value="设置用户年龄" @click="setUserAge()">

        <hr>
        <input type="text" v-model="num">
    </div>

    <hr>
    <input type="button" value="设置用户性别" onclick="setUserSex()">    
    <input type="button" value="设置新消息" onclick="setData()">
    <script>

        // let arr1 = new Array();
        // let arr2 = new Array();
        // let arr3 = arr2;
        // arr2.push(1);
        // console.log(arr3);
        // console.log(arr1===arr2);
        // console.log(arr2===arr3);

        let vm = new Vue({
            el:"#app",
            data:{
                msg:"基本类型的数据",
                num:10,
                user:{
                    name:"tom"
                }
            },
            methods:{
                setMsg(){
                    this.msg = "新消息";
                },
                setNewMsg(){
                    // this.newMsg = "这是一条新的消息";
                    // this.$set(this.$data,"newMsg",1);
                },
                setUserAge(){
                    // 相办法给age 提供 getter  setter 方法
                    //  属性  set 实例属性 
                    // vm.$set(target,属性名称,属性值)
                    // Vue.set()
                    // this.user.age = 23;
                    // Vue.set(this.user,"age",23);
                    // vm.$set(this.user,"age",23);
                    this.$set(this.user,"age",23);
                }
            },
            // 数据监视器
            watch:{
                // 监视的是已经具有 getter 和 setter 方法的属性的变换
                // key 取值 为 data 中定义的属性名称（一层）
                // 监视一层
                msg:function(newValue,oldValue){
                    console.log(newValue,":",oldValue);
                },
                num:function(newValue,oldValue){
                    if(isNaN(newValue)){
                        this.num = oldValue;
                    }
                },
                // 实现深度监视
                user:{
                    // handler 该监视器被调用的回调函数
                    // newValue 和 oldValue 取得 是栈中的值
                    handler:(newValue,oldValue)=>{
                        console.log(newValue === oldValue);
                        console.log(newValue,":",oldValue);
                    },
                    // deep 设置监视模式   默认 false  
                    deep:true
                }
            }
        });


        function setUserSex(){
            vm.$set(vm.user,"sex","男");
        }

        function setData(){
            // vm.$set(vm)
            // vm.$set(vm,"newMsg","消息");
            // 指定的Vue 对象所 定义过的数据
            console.log(vm.$data);

        }
    </script>
</body>
</html>
```



### 九、组件定义

+ 组件的全局和局部定义方式 ，和过滤、指令的全局和局部定义方式基本一样
+ Vue 的组件就是自定义标签  `<组件名称>`


+ 全局组件
  + 先定义构造器 ，在创建组件
  + 直接创建组件



+ 局部组件

  + 先定义构造器 ，在创建组件
  + 直接创建组件

+ 模板加载 引用
+ 组件中 data 的数据定义方式


```js
Vue.component("hello",{
  template:"#wbs",  
  data:function(){
    return {
      arr:["a","b","c"]
    }
  }
});
```

+ 原因：组件在项目运行过程中，可能会被创建多次，所以data要求是函数
  + 为了解决 js 中 多变量 可以实现 引用数据类型的数据共享
  + 为了隔离组件与组件间的数据独立，互不影响，通过函数的方式，让组件在每次创建时都返回一个新的对象
  + 堆栈的数据存储原理








### 十、父子组件的传值



### 十一、路由



### 十二、模块化开发

#### 1、vue Ajax 模块化

#### 2、单文件组件  .vue   （html  css  js）







### 十二、vuex 中央数据总线（仓库）








































